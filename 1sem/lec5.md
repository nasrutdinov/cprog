## Лекция 5.  Работа с памятью 


Стек вызовов https://apmath-spbu.github.io/courses/basics/lecture2/callstack/
 
Стек и куча https://nsu-programming.github.io/textbook/cpp/dynamic-memory.html  

Стек и куча  2 https://dzen.ru/a/XM6HhVcEdgCzAy3q


 
**Указатель** — это переменная, значением которой является адрес ячейки памяти (оперативной). 

Указатели объявляются точно так же, как и обычные переменные, 
только со звёздочкой (звездочка по отношению к переменной и типом 
может быть на любом расстоянии). 

```C++
// Указатели
int *a, * b

// Обычные переменные
int  c, d;

// Указатели
void *f;
```

Типичное использование указателя - динамическое выделение памяти под массив во время выполнения программы: 

```C++
//...
    std::cout << "input size of array:  \n"; 

    int size;
    std::cin >> size;
// Выделяем память под массив из size элементов
// Теперь в b храниться адрес нулевого элемента массива
    int *b = new int[size]); 
	
// Для массивов доступ к элементам записывается в 'обычном' виде
   for (int k=0;k<size;++k){
        b[k]=k;
    }
//... 
```

Доступ к элементам, находящимся по адресу в указателе, осуществляется через 
операцию разыменования *
```C++
...
// Объявляем указатель
    int *x; 
// Выделяем память 
    x=new int; 
	
// Записываем в эту память значение, используя операцию разыменования * 
    *x = 5; 
... 
```

**Структура** -- это объединение нескольких объектов, возможно, различного типа под одним 
именем. В качестве объектов могут выступать переменные, массивы, указатели и другие структуры. 
Структура представляет собой сложный тип данных, составленный из простых типов. После 
закрывающей фигурной скобки } в объявлении структуры обязательно ставится точка с запятой. 


```C++
// Пример объявления структуры
#include <iostream>
#include <string>

// Объявляем новый тип данных 
struct date{
	int day;     
	std::string month;
	int year;    
}; 

int main(){  
    date x;

// Доступ к элементам структуры осуществляется через точку
    std::cin >> x.day >> x.month >> x.year;

```

## Односвязные списки

https://prog-cpp.ru/data-ols/?ysclid=ln9z9r4gub897690139

https://www.bestprog.net/ru/2022/02/11/c-linear-singly-linked-list-general-information-ru/ 

Динамический список представляет из себя некоторое количество 
компонентов (узлов), содержащих данные, а также ссылку на следующий компонент 

```C++
// Пример создания списка 
#include <iostream>
#include <string>

using namespace std;

struct node {
	int value;   // Данные
	node* next;  // Ссылка на следующий элемент списка
};


int main()
{
	node* head;
	node *tail, *curr;

	head = new node; 
	// (*head).value = -1;
	head->value = -1;
	head->next = NULL;

	tail = head;
// Добавление элементов к списку 
	for (int k = 0; k < 5; k++) {
		curr = new node;
		curr->value = k;
		curr->next = NULL;
		tail->next = curr;
		tail = curr;
	}

// Прохождение по списку
	curr = head;
	while (curr) {
		cout << curr->value << "\n";
		curr = curr->next;
	}
	
	return 0;
}
```

**Операции удаления и вставки элементов в список**

Вставка после элемента curr.  

```C++ 
// Создать элемент. Заполнить поле данных элемента
	node *elem=new node; 
	elem->value = 3; 
	
// Определить позицию элемента, который следует перед позицией вставки элемента. 
... 

// Получить указатель curr на эту позицию. 

	elem->next = curr->next;
	curr->next = elem;

```

Удаление элемента из списка в заданной позиции curr (не первой) 


```C++ 

// Определить позицию элемента, за который следует удалить элемент 
... 

// Получить указатель curr на эту позицию. 
	node *elem = curr->next; 
	curr->next = elem->next;
	
	delete elem;

```
